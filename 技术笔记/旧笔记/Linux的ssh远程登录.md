---
title: Linux的ssh远程登录
date: 2020-10-07 09:39:28
tags: [Linux, SSH]
categories: 技术笔记
---

# 法一：Windows通过登录工具远程登录linux

1. linux中启动ssh服务
    * 安装ssh服务：`sudo apt-get install openssh-server   `
    * 启动ssh服务: `sudo /etc/init.d/ssh start  `
    
2. windows中安装putty
  
  * 直接去[官网](https://www.chiark.greenend.org.uk/~sgtatham/putty/)下载安装
  
3.  在linux中安装net-tools来查看局域网ip
  * 使用命令`sudo apt-get install net-tools`。
  * 使用命令`ifconfig`来查看ip。
    ![](https://gitee.com/zhangjie0524/picgo/raw/master/img/20201007114241.jpg)
4. 启动putty
    * 在putty中输入局域网IP
    * 之后开启一个黑色终端界面，在里面输入用户名和密码，连接到linux。![](https://gitee.com/zhangjie0524/picgo/raw/master/img/20201007115016.jpg)

# 法二：ssh通过账号密码登录远程linux服务器

* `ssh 账号@服务器地址`,如：`ssh zhangjie@106.14.197.71`
* 前提是双方的ssh服务都启动。

# 法三：使用公钥ssh远程登录到linux

* 不用输入密码即可登录，可应用于自动登录。
* 在客户端中使用`ssh-keygen`来生成ssh秘钥和公钥
* 将公钥部署到linux服务器上去。命令为`ssh-copy-id -i ~/.ssh/id_rsa.pub  root@111.111.111.111`
* 在客户端中使用`ssh root@111.111.111.111 -p 22`即可登录linux服务器。![](https://gitee.com/zhangjie0524/picgo/raw/master/img/20201007172656.jpg)


# 查看linux的网络情况

* 使用`ifconfig`命令可以查看本机的网络情况。![](https://gitee.com/zhangjie0524/picgo/raw/master/img/20201007115709.jpg)

# top查看工具

* top 工具是我们常用的一个查看工具，能实时的查看我们系统的一些关键信息的变化。

- top 是一个在前台执行的程序，所以执行后便进入到这样的一个交互界面，正是因为交互界面我们才可以实时的获取到系统与进程的信息。在交互界面中我们可以通过一些指令来操作和筛选。
- 常用交互命令：

| 常用交互命令 | 解释                                                         |
| ------------ | ------------------------------------------------------------ |
| q            | 退出程序                                                     |
| I            | 切换显示平均负载和启动时间的信息                             |
| P            | 根据 CPU 使用百分比大小进行排序                              |
| M            | 根据驻留内存大小进行排序                                     |
| i            | 忽略闲置和僵死的进程，这是一个开关式命令                     |
| k            | 终止一个进程，系统提示输入 PID 及发送的信号值。一般终止进程用 15 信号，不能正常结束则使用 9 信号。安全模式下该命令被屏蔽。 |

- 示例：![img](https://gitee.com/zhangjie0524/picgo/raw/master/img/20200715105949.jpg)
- top 显示的第一排，

| 内容                         | 解释                                    |
| ---------------------------- | --------------------------------------- |
| top                          | 表示当前程序的名称                      |
| 10:59:28                     | 表示当前的系统的时间                    |
| up 7 :06                     | 表示该机器已经启动了多长时间            |
| 1 user                       | 表示当前系统中只有一个用户              |
| load average: 0.00,0.00,0.00 | 分别对应 1、5、15 分钟内 cpu 的平均负载 |

- top 的第二行数据，基本上第二行是进程的一个情况统计

| 内容             | 解释                 |
| ---------------- | -------------------- |
| Tasks: 384 total | 进程总数             |
| 1 running        | 1 个正在运行的进程数 |
| 383 sleeping     | 383 个睡眠的进程数   |
| 0 stopped        | 没有停止的进程数     |
| 0 zombie         | 没有僵尸进程数       |

- top 的第三行数据，这一行基本上是 CPU 的一个使用情况的统计了

| 内容           | 解释                                                         |
| -------------- | ------------------------------------------------------------ |
| Cpu(s): 0.1 us | 用户空间进程占用 CPU 百分比                                  |
| 0.2 sy         | 内核空间运行占用 CPU 百分比                                  |
| 0.0 ni         | 用户进程空间内改变过优先级的进程占用 CPU 百分比              |
| 99.7 id        | 空闲 CPU 百分比                                              |
| 0.0 wa         | 等待输入输出的 CPU 时间百分比                                |
| 0.0 hi         | 硬中断(Hardware IRQ)占用 CPU 的百分比                        |
| 0.0 si         | 软中断(Software IRQ)占用 CPU 的百分比                        |
| 0.0 st         | (Steal time) 是 hypervisor 等虚拟服务中，虚拟 CPU 等待实际 CPU 的时间的百分比 |

- top 的第四行数据，这一行基本上是内存的一个使用情况的统计了：

| 内容              | 解释                 |
| ----------------- | -------------------- |
| 3908.4 total      | 物理内存总量         |
| 436.1 free        | 空闲内存总量         |
| 1253.8 used       | 使用的物理内存总量   |
| 2218.6 buff/cache | 用作内核缓存的内存量 |

- top 的第五行数据，这一行基本上是交换区的一个使用情况的统计了

| 内容             | 解释                                                         |
| ---------------- | ------------------------------------------------------------ |
| 2048.0 total     | 交换区总量                                                   |
| 2048.0 free      | 空闲交换区总量                                               |
| 0.0 used         | 使用的交换区总量                                             |
| 2379.4 avail Mem | 缓冲的交换区总量,内存中的内容被换出到交换区，而后又被换入到内存，但使用过的交换区尚未被覆盖 |

- 再下面就是进程的一个情况了

| 列名       | 解释                                         |
| ---------- | -------------------------------------------- |
| PID/进程号 | 进程 id                                      |
| USER       | 该进程的所属用户                             |
| PR         | 该进程执行的优先级 priority 值               |
| NI         | 该进程的 nice 值                             |
| VIRT       | 该进程任务所使用的虚拟内存的总数             |
| RES        | 该进程所使用的物理内存数，也称之为驻留内存数 |
| SHR        | 该进程共享内存的大小                         |
| S          | 该进程进程的状态: S=sleep R=running Z=zombie |
| %CPU       | 该进程 CPU 的利用率                          |
| %MEM       | 该进程内存的利用率                           |
| TIME+      | 该进程活跃的总时间                           |
| COMMAND    | 该进程运行的名字                             |

- 注意：
  - NICE 值叫做静态优先级，是用户空间的一个优先级值，其取值范围是-20 至 19。这个值越小，表示进程”优先级”越高，而值越大“优先级”越低。nice 值中的 -20 到 19，中 -20 优先级最高， 0 是默认的值，而 19 优先级最低。
  - PR 值表示 Priority 值叫动态优先级，是进程在内核中实际的优先级值，进程优先级的取值范围是通过一个宏定义的，这个宏的名称是 MAX_PRIO，它的值为 140。Linux 实际上实现了 140 个优先级范围，取值范围是从 0-139，这个值越小，优先级越高。而这其中的 0 - 99 是实时进程的值，而 100 - 139 是给用户的。其中 PR 中的 100 to 139 值部分有这么一个对应 PR = 20 + (-20 to +19)，这里的 -20 to +19 便是 nice 值，所以说两个虽然都是优先级，而且有千丝万缕的关系，但是他们的值，他们的作用范围并不相同
  - VIRT 任务所使用的虚拟内存的总数，其中包含所有的代码，数据，共享库和被换出 swap 空间的页面等所占据空间的总数



