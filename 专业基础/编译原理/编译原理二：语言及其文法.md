---
title: 编译原理二：语言及其文法
date: 2021-09-26 09:09:59
tags: [编译原理]
categories: 专业基础
---

# 字母表与串

## 字母表

* **字母表(Alphabet)**:字母表是一个**有穷的符号集合**。用符号$\sum$表示。
  * 符号：包括字母，数字，标点符号等。
  * 二进制字母表`{0, 1}`,  $ACSII$字符集等都是字母表。
* 字母表上的运算：
  * **笛卡尔积**：两个字母表相乘，其结果是两个字母表的元素前后连接形成的新字母表。$\sum_1\sum_2 = \{ab|a \in \sum_i, b \in \sum_2\}$。示例：`{0, 1} {a, b} = {0a, 0b, 1a, 1b}`.
  * **n次幂**：n次幂的实质就是多个相同字母表相乘。字母表的n次幂运算后的结果是**长度为n的符号串构成的集合**。注意字母表的0次幂是空集合$\varepsilon$.![](https://zjpicture.oss-cn-beijing.aliyuncs.com/img/20210926092225.png).
  * **正闭包（positive closure)**：字母表的1次幂到无穷次幂的集合的并集。结果是长度为正数的符号串构成的集合。
  * **克林闭包(Kleene closure)**: 字母表的0次幂到无穷次幂的集合的并集。结果是任意符号串（长度可以为0）构成的集合。

## 串

* **串(String)**: 一个串是字母表的克林闭包产生的集合中的一个元素。
  * 串是字母表中**符号的一个有穷序列**。
* **串的长度**：指串中符号的个数，表示为$|s|$.
* **空串**：长度为0的串，用$\varepsilon$表示。
* **串的连接运算**：把一个串附加到另一个串后面形成新串。
  * 将$y$连接到$x$后面而形成的串记为$xy$
  * 空串是连接运算的单位元，对于任何串$s$都有：$\varepsilon s = s\varepsilon = s$.
* **串的幂运算**：将幂运算转化为连接运算，如$s^3 = sss$

# 文法的定义

* **终结符(terminal symbol)**：是文法所定义的语言的基本符号，有时也称为token。（类似于英文中的单词，对于英语，单词就是基本符号，也就是终结符）。终结符集合用$V_T$​表示。
  * 字母表中排在前面的**小写字母**，如$a, b, c$等常表示终结符
  * 运算符，如$+, *$等是终结符
  * 标点符号是终结符
  * 数字是终结符
  * **粗体字符串**，如**id, if**等是终结符
* **非终结符(nonterminal)**：是用来表示语法成分的符号，也称为语法变量。（非终结符还可以拆分为终结符，对于英语来说，一个`<名词短语>`就是一个非终结符，还可以拆成一个具体的名词）。非终结符集合用$V_N$​表示。
  * 字母表中排在前面的**大写字母**，如$A,B, C$等常表示非终结符
  * **小写且斜体**的名字，如$expr、stmt$等表示非终结符
  * 代表程序构造的大写字母是非终结符。如$E(表达式) 、T(项)、 F(因子)$​。
* **产生式(production)**：
  * 描述了将终结符和非终结符组合成串的方法。
  * 一般形式：$\alpha \rightarrow \beta$, 读作$\alpha$定义为$\beta$
  * $\alpha$：称为产生的头部或者左部。是终结符集合和非终结符集合的组合，并且至少包含一个非终结符。
  * $\beta$：成为产生式的体或者右部，没有具体要求，可以是终结符，非终结符，甚至空。
  * 产生式的简写：对一组有相同左部的产生式可以通过$|$​符号（读作或者）来连接。如：$\alpha \rightarrow \beta_1 |\beta_2|...|\beta_n$​，其中$\beta_1 \beta_2 ... \beta_n$​​都是**候选式**。
* **开始符号(start symbol)**: 该文法中包含最大的语法成分（语法分析树的顶端），当然一定是非终结符。
  * 字母$S$​​（start)常表示开始符号。
  * 一般情况下：**第一个产生式的左部就是开始符号**。
* 其它符号表示：
  * 字母表中排在后面的大写字母，如（$X, Y, Z$)表示一般文法符号（既有可能是终结符，也有可能是非终结符）
  * 字母表中**排在后面的小写字母**（主要是$u, v, ...z$)表示**终结符号串**（包括空串）
    * 小写的希腊字母，如$\alpha 、\beta 、\gamma$​表示文法符号串（普通符号串，既可能有非终结符，也可能有终结符，还包括空串）

# 语言的定义

## 推导和规约

* 推导的定义：![](https://zjpicture.oss-cn-beijing.aliyuncs.com/img/20210929145941.png)
  * 推导就是**用产生式的右部替换产生式的左部**
  * 推导的最后结果就是将非终结符替换为终结符表示。
* n步推导：![](https://zjpicture.oss-cn-beijing.aliyuncs.com/img/20210929150059.png)
* **规约是推导的逆过程**，其目的是将由终结符组成的文法，转换为非终结符的抽象表示。
* 判定一个词串是否是该语言的句子：
  * 从推导的角度：推导该句子是否成功
  * 从规约的角度：能否成功规约

## 语言的形式化定义

* **句型(sentential form)**:![](https://zjpicture.oss-cn-beijing.aliyuncs.com/img/20210929150728.png)
  * 一个句型中既可以包含终结符，也可以包含非终结符，也可能是空串
* **句子（sentence）**：![](https://zjpicture.oss-cn-beijing.aliyuncs.com/img/20210929150855.png)
  * 句子是**不包含非终结符的句型**。

* **语言**的形式化定义：由文法$G$​​的开始符号$S$​​推导出的所有**句子**构成的集合称为文法$G$​​生成的语言，记为$L(G)$​​​。用公式表达：$$L(G)=\{w | S \Rightarrow^* w, w\in V_T^* \}$$​​​​​.​
* 语言上的运算：并、连接、幂、克林闭包、正闭包 ![](https://zjpicture.oss-cn-beijing.aliyuncs.com/img/20210929151901.png)



# 文法的分类

## 0型文法

* 又称无限制文法/短语结构文法（Phrase Structure Grammar，**PSG**）
* 如$\alpha \rightarrow \beta $​​​​​, $\alpha$​​中至少包含一个非终结符。（即一个既包含非终结符也可能包含非终结符的普通文法符号可以直接替换）不需任何条件即可用$\beta$​替换$\alpha$​，所以叫做无限制文法。
* **0型语言**是由0型文法生成的语言，其它语言类似，之后不再赘述。

## 1型文法

* 又称上下文有关文法（Context-Sensitive Grammar ,**CSG**)
* 需要某一非终结符的前后都有确定的终结符才能进行推导替换，所以叫做上下文有关文法。如:$\alpha_1 A \alpha_2 \rightarrow \alpha_1 \beta\alpha_2(\beta \notin \varepsilon)$(可以用$\alpha_1 \beta\alpha_2$替换$\alpha_1 A \alpha_2 $)

## 2型文法

* 又称**上下文无关文法（Context-Free Grammar， CFG)**
* **只有非终结符**才可以直接替换，无需对非终结符有其它限制，因此称为上下文无关。
* 常见形式：$A \rightarrow \beta$​(这种产生式，就可以用$\beta$替换$A$)
* 与0型文法的区别在于，2型文法只能无条件替换非终结符，而0型文法的非终结符和终结符都可以直接替换。

## 3型文法

* 又称**正则文法（Regular Grammar, RG)**
* 正则文法又分为左线性文法和右线性文法：
  * **右线性文法(Right Linear)**: $A \rightarrow wB$或$A \rightarrow w$
  * **左线性文法(Left Linear)**: $A \rightarrow Bw$或者$A \rightarrow w$
* 总结来说，正则文法就是，右边的产生式中一定有一个终结符，且最多有一个非终结符，且所有非终结符都位于终结符的同一侧（左侧为左线性文法，右侧为右线性文法，但是不能既有在左侧的，又有在右侧的）

## 四种文法之间的关系

* 从0型文法到3型文法的限制是逐级加强，同时也是逐级包含的关系：![](https://zjpicture.oss-cn-beijing.aliyuncs.com/img/20211006112258.png)

# CFG(上下文无关文法)的分析树

* 示例：![](https://zjpicture.oss-cn-beijing.aliyuncs.com/img/20211006114603.png)
* 分析树定义：
  * 根结点的标号是文法的开始符号
  * 内部结点表示对一个产生式的应用，该结点的标号是此产生式的左部，该结点的子节点的标号**从左到右构成了产生式的右部**。
  * 叶节点的标号**既可以是非终结符，也可以是终结符**。
  * 从左到右得到的符号串称为是这棵**树的产出**或**边缘**。
* 分析树是推导的图形化表示。
* **句型的短语**：给定一个句型，其分析树中的每一颗**子树的边缘**称为该句型的一个短语。
  * **直接短语**：如果子树只有父子两代结点，那么这颗子树的边缘称为该句型的一个直接短语。
    * 直接短语一定是某产生式的右部
    * 但产生式的右部不一定是给定句型的直接短语。
* **二义性文法**：如果一个文法可以为某个句子生成多颗分析树，则称这个文法是二义性的。
  * 不能直接判断一个文法是否是无二义性的，但是能给出一组充分条件，满足这组充分条件的文法肯定是无二义性的。
